(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"2pv8":function(e,t,n){"use strict";n.r(t),n.d(t,"ClazzModule",function(){return C});var o=n("ofXK"),a=n("P408"),i=n("v6Ln"),r=n("fXoL"),l=n("tk/3"),s=n("tyNb"),c=n("3Pt+");function b(e,t){if(1&e&&(r.Jb(0,"option",2),r.gc(1),r.Ib()),2&e){const e=t.$implicit;r.Vb("ngValue",e.id),r.wb(1),r.ic(" ",e.name," ")}}let h=(()=>{class e{constructor(e){this.httpClient=e,this.teachers=new Array,this.teacherId=new c.b,this.beChange=new r.n}set id(e){this.teacherId.setValue(e)}writeValue(e){console.log("writeValue is called"),this.teacherId.setValue(e)}registerOnChange(e){console.log("registerOnChange is called"),this.teacherId.valueChanges.subscribe(t=>e(t))}registerOnTouched(e){console.warn("registerOnTouched not implemented")}ngOnInit(){console.log("\u6559\u5e08\u9009\u62e9\u7ec4\u4ef6\u521d\u59cb\u5316"),this.teacherId.valueChanges.subscribe(e=>this.beChange.emit(e)),this.httpClient.get("teacher").subscribe(e=>{this.teachers=e,console.log("\u6559\u5e08\u9009\u62e9\u7ec4\u4ef6\u63a5\u6536\u5230\u4e86\u6570\u636e")})}}return e.\u0275fac=function(t){return new(t||e)(r.Gb(l.b))},e.\u0275cmp=r.Ab({type:e,selectors:[["app-klass-select"]],inputs:{id:"id"},outputs:{beChange:"beChange"},features:[r.vb([{provide:c.h,multi:!0,useExisting:Object(r.S)(()=>(console.log("useExisting->forwardRef\u4e2d\u7684\u56de\u8c03\u65b9\u6cd5\u88ab\u8c03\u7528\u4e00\u6b21"),e))}])],decls:2,vars:2,consts:[["id","teacherId",1,"form-control",3,"formControl"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(e,t){1&e&&(r.Jb(0,"select",0),r.ec(1,b,2,2,"option",1),r.Ib()),2&e&&(r.Vb("formControl",t.teacherId),r.wb(1),r.Vb("ngForOf",t.teachers))},directives:[c.p,c.i,c.c,o.j,c.m,c.r],styles:[""]}),e})();function d(e,t){1&e&&(r.Jb(0,"small",10),r.gc(1," \u73ed\u7ea7\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a "),r.Ib())}function g(e,t){1&e&&(r.Jb(0,"small",10),r.gc(1," \u5fc5\u987b\u6307\u5b9a\u4e00\u4e2a\u73ed\u4e3b\u4efb "),r.Ib())}let u=(()=>{class e{constructor(e,t){this.httpClient=e,this.router=t,this.url="clazz",this.clazz={name:"",teacherId:null},this.teachers=new Array}ngOnInit(){this.httpClient.get("teacher").subscribe(e=>this.teachers=e)}onSubmit(){const e=new i.a({name:this.clazz.name,teacher:new a.a({id:this.clazz.teacherId})});this.httpClient.post(this.url,e).subscribe(e=>this.router.navigateByUrl("/clazz"),e=>console.log("\u4fdd\u5b58\u5931\u8d25",e))}onTeacherChange(e){this.clazz.teacherId=e}}return e.\u0275fac=function(t){return new(t||e)(r.Gb(l.b),r.Gb(s.c))},e.\u0275cmp=r.Ab({type:e,selectors:[["app-add"]],decls:20,vars:7,consts:[[1,"container-sm",3,"ngSubmit"],[1,"mb-3","row"],["for","name",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text","name","name","id","name",1,"form-control",3,"ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],[1,"col-sm-2","col-form-label"],[3,"beChange"],[1,"col-sm-10","offset-2"],[1,"btn","btn-primary",3,"disabled"],[1,"text-danger"]],template:function(e,t){1&e&&(r.Jb(0,"pre"),r.gc(1),r.Tb(2,"json"),r.Ib(),r.Jb(3,"form",0),r.Qb("ngSubmit",function(){return t.onSubmit()}),r.Jb(4,"div",1),r.Jb(5,"label",2),r.gc(6,"\u540d\u79f0"),r.Ib(),r.Jb(7,"div",3),r.Jb(8,"input",4),r.Qb("ngModelChange",function(e){return t.clazz.name=e}),r.Ib(),r.ec(9,d,2,0,"small",5),r.Ib(),r.Ib(),r.Jb(10,"div",1),r.Jb(11,"label",6),r.gc(12,"\u73ed\u4e3b\u4efb"),r.Ib(),r.Jb(13,"div",3),r.Jb(14,"app-klass-select",7),r.Qb("beChange",function(e){return t.onTeacherChange(e)}),r.Ib(),r.ec(15,g,2,0,"small",5),r.Ib(),r.Ib(),r.Jb(16,"div",1),r.Jb(17,"div",8),r.Jb(18,"button",9),r.gc(19,"\u4fdd\u5b58 "),r.Ib(),r.Ib(),r.Ib(),r.Ib()),2&e&&(r.wb(1),r.hc(r.Ub(2,5,t.clazz)),r.wb(7),r.Vb("ngModel",t.clazz.name),r.wb(1),r.Vb("ngIf",""===t.clazz.name),r.wb(6),r.Vb("ngIf",null===t.clazz.teacherId),r.wb(3),r.Vb("disabled",""===t.clazz.name||null===t.clazz.teacherId))},directives:[c.s,c.j,c.k,c.a,c.i,c.l,o.k,h],pipes:[o.e],styles:[""]}),e})();var m=n("0UvW"),p=n("cDLT");function f(e,t){if(1&e){const e=r.Kb();r.Jb(0,"tr"),r.Jb(1,"td"),r.gc(2),r.Ib(),r.Jb(3,"td"),r.gc(4),r.Ib(),r.Jb(5,"td"),r.gc(6),r.Ib(),r.Jb(7,"td"),r.Jb(8,"a",8),r.Hb(9,"i",9),r.gc(10,"\u7f16\u8f91 "),r.Ib(),r.Jb(11,"span",10),r.Qb("click",function(){r.bc(e);const n=t.index,o=t.$implicit;return r.Sb().onDelete(n,o.id)}),r.Hb(12,"i",11),r.gc(13,"\u5220\u9664 "),r.Ib(),r.Ib(),r.Ib()}if(2&e){const e=t.$implicit,n=t.index;r.wb(2),r.hc(n+1),r.wb(2),r.hc(e.name),r.wb(2),r.hc(e.teacher.name),r.wb(2),r.Wb("routerLink","edit/",e.id,"")}}let I=(()=>{class e{constructor(e){this.httpClient=e,this.page=0,this.size=3,this.pageData=new m.a({content:[],number:this.page,size:this.size,numberOfElements:0})}ngOnInit(){console.log("clazz\u7ec4\u4ef6\u8c03\u7528ngOnInit()"),this.loadByPage()}onPage(e){this.loadByPage(e)}loadByPage(e=0){console.log("\u89e6\u53d1loadByPage\u65b9\u6cd5");const t=(new l.e).append("page",e.toString()).append("size",this.size.toString());this.httpClient.get("/clazz/page",{params:t}).subscribe(t=>{this.page=e,console.log("clazz\u7ec4\u4ef6\u63a5\u6536\u5230\u8fd4\u56de\u6570\u636e\uff0c\u91cd\u65b0\u8bbe\u7f6epageData"),this.pageData=t,console.log(t)})}onDelete(e,t){console.log("onDelete called",e,t),confirm("\u8be5\u64cd\u4f5c\u4e0d\u53ef\u9006\uff0c\u8bf7\u786e\u8ba4")&&this.httpClient.delete("/clazz/"+t.toString()).subscribe(()=>{console.log("\u5220\u9664\u6210\u529f"),this.pageData.content.splice(e,1)},e=>console.log("\u5220\u9664\u5931\u8d25",e))}}return e.\u0275fac=function(t){return new(t||e)(r.Gb(l.b))},e.\u0275cmp=r.Ab({type:e,selectors:[["app-clazz"]],decls:19,vars:2,consts:[[1,"row"],[1,"col-12","text-right"],["routerLink","./add",1,"btn","btn-primary","mr-2"],[1,"fas","fa-plus"],[1,"table","table-striped","mt-2"],[1,"table-primary"],[4,"ngFor","ngForOf"],[3,"page","bePageChange"],[1,"btn","btn-outline-primary","btn-sm",3,"routerLink"],[1,"fas","fa-pen"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"far","fa-trash-alt"]],template:function(e,t){1&e&&(r.Jb(0,"div",0),r.Jb(1,"div",1),r.Jb(2,"a",2),r.Hb(3,"i",3),r.gc(4,"\u65b0\u589e"),r.Ib(),r.Ib(),r.Ib(),r.Jb(5,"table",4),r.Jb(6,"thead"),r.Jb(7,"tr",5),r.Jb(8,"th"),r.gc(9,"\u5e8f\u53f7"),r.Ib(),r.Jb(10,"th"),r.gc(11,"\u540d\u79f0"),r.Ib(),r.Jb(12,"th"),r.gc(13,"\u73ed\u4e3b\u4efb"),r.Ib(),r.Jb(14,"th"),r.gc(15,"\u64cd\u4f5c"),r.Ib(),r.Ib(),r.Ib(),r.Jb(16,"tbody"),r.ec(17,f,14,4,"tr",6),r.Ib(),r.Ib(),r.Jb(18,"app-page",7),r.Qb("bePageChange",function(e){return t.onPage(e)}),r.Ib()),2&e&&(r.wb(17),r.Vb("ngForOf",t.pageData.content),r.wb(1),r.Vb("page",t.pageData))},directives:[s.e,o.j,p.a],styles:[""]}),e})();function v(e,t){1&e&&(r.Jb(0,"small",9),r.gc(1," \u73ed\u7ea7\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a "),r.Ib())}let z=(()=>{class e{constructor(e,t,n){this.activatedRoute=e,this.router=t,this.httpClient=n,this.nameFormControl=new c.b("",c.q.required),this.formGroup=new c.e({id:new c.b(null,c.q.required),name:this.nameFormControl,teacherId:new c.b(null,c.q.required)})}ngOnInit(){this.loadById(+this.activatedRoute.snapshot.params.id)}loadById(e){var t;console.log("loadById"),null===(t=this.formGroup.get("id"))||void 0===t||t.setValue(e),this.httpClient.get("/clazz/"+e.toString()).subscribe(e=>{var t;console.log("\u63a5\u6536\u5230\u4e86clazz",e),this.nameFormControl.patchValue(e.name),null===(t=this.formGroup.get("teacherId"))||void 0===t||t.setValue(e.teacher.id)},e=>console.log(e))}onTeacherChange(e){var t;console.log("\u63a5\u6536\u5230\u4e86\u9009\u62e9\u7684teacherId",e),null===(t=this.formGroup.get("teacherId"))||void 0===t||t.setValue(e)}onSubmit(){var e,t;console.log("\u70b9\u51fb\u4e86\u63d0\u4ea4\u6309\u94ae");const n=null===(e=this.formGroup.get("id"))||void 0===e?void 0:e.value,o=this.nameFormControl.value,a=null===(t=this.formGroup.get("teacherId"))||void 0===t?void 0:t.value,r=new i.a({name:o,teacher:{id:a}});this.httpClient.put("/clazz/"+n,r).subscribe(()=>this.router.navigate(["../../"],{relativeTo:this.activatedRoute}),e=>console.log(e))}}return e.\u0275fac=function(t){return new(t||e)(r.Gb(s.a),r.Gb(s.c),r.Gb(l.b))},e.\u0275cmp=r.Ab({type:e,selectors:[["app-edit"]],decls:17,vars:5,consts:[[1,"container-sm",3,"formGroup","ngSubmit"],[1,"mb-3","row"],[1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text",1,"form-control",3,"formControl"],["class","text-danger",4,"ngIf"],["formControlName","teacherId"],[1,"col-sm-10","offset-2"],[1,"btn","btn-primary",3,"disabled"],[1,"text-danger"]],template:function(e,t){1&e&&(r.Jb(0,"form",0),r.Qb("ngSubmit",function(){return t.onSubmit()}),r.Jb(1,"div",1),r.Jb(2,"label",2),r.gc(3,"\u540d\u79f0"),r.Ib(),r.Jb(4,"div",3),r.gc(5),r.Hb(6,"input",4),r.ec(7,v,2,0,"small",5),r.Ib(),r.Ib(),r.Jb(8,"div",1),r.Jb(9,"label",2),r.gc(10,"\u73ed\u4e3b\u4efb"),r.Ib(),r.Jb(11,"div",3),r.Hb(12,"app-klass-select",6),r.Ib(),r.Ib(),r.Jb(13,"div",1),r.Jb(14,"div",7),r.Jb(15,"button",8),r.gc(16,"\u4fdd\u5b58 "),r.Ib(),r.Ib(),r.Ib(),r.Ib()),2&e&&(r.Vb("formGroup",t.formGroup),r.wb(5),r.ic(" ",t.nameFormControl.invalid," "),r.wb(1),r.Vb("formControl",t.nameFormControl),r.wb(1),r.Vb("ngIf",t.nameFormControl.invalid),r.wb(8),r.Vb("disabled",t.formGroup.invalid))},directives:[c.s,c.j,c.f,c.a,c.i,c.c,o.k,h,c.d],styles:[""]}),e})();var J=n("biO4");const w=[{path:"",component:I},{path:"add",component:u},{path:"edit/:id",component:z}];let C=(()=>{class e{}return e.\u0275mod=r.Eb({type:e}),e.\u0275inj=r.Db({factory:function(t){return new(t||e)},imports:[[o.b,c.g,J.a,c.o,s.f.forChild(w)]]}),e})()}}]);